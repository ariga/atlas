---
title: "Announcing v0.18: Schema Docs, Drift Detection, SQLAlchemy Support and More"
authors: rotemtam
tags: [release, drift-detection, docs, release]
---

import InstallationInstructions from '../../md/components/_installation_instructions.mdx'

Hi Everyone,

Thanks for joining us today for another release announcement! We have a bunch of really exciting features to share with
you today, so let's get started! Here's what we'll cover:
* [Schema Docs](#schema-docs) - Atlas lets you manage your database schema as code. One of the things we love most
  about code, is that because of its formal structure, it's possible to automatically generate documentation from it.
  With this release, we're introducing a new feature that lets you generate code-grade documentation for
  your database schema.
* [Drift Detection](#drift-detection) - A common source of database trouble is that the schema in your database
  doesn't match the schema in your code. This can happen for a variety of reasons, including manual changes to the
  database, or changes made by other tools. Today, we are happy to announce the availability of a new feature that
  lets you automatically detect these changes, and alert you when they happen.
* [SQLAlchemy Support](#sqlalchemy-support) - SQLAlchemy is a popular Python ORM. Developers using SQLAlchemy can
  use Atlas to automatically plan schema migrations for them, based on the desired state of their schema instead
  of crafting them by hand.
* [VSCode ERDs](#vscode-erds) - We've added a new feature to our VSCode extension that lets you visualize your
  database schema as an ERD diagram.

## Schema Docs

One of the most surprising things we learned from working with teams on their Atlas journey, is that many teams
do not have a single source of truth for their database schema.  As a result, it's impossible to maintain up-to-date
documentation for the database schema, which is crucial for disseminating knowledge about the database across the team.

Atlas changes this by creating a workflow that _begins_ with a single source of truth for the database schema - the
desired state of the database, as defined in code. This is what enables Atlas to automatically plan migrations, detect
drift (as we'll see below), and now, generate documentation.

### How it works

Documentation is currently generated for the most recent version of your schema for migration directories
that are pushed to Atlas Cloud.  To generate docs for your schema, follow these steps:

1. Make sure you have the most recent version of Atlas:
   <InstallationInstructions/>

2. Login to Atlas Cloud using the CLI:

   ```bash
   atlas login
   ```
   If you do not already have a (free) Atlas Cloud account, follow the instructions to create one.

3. Push your migrations to Atlas Cloud:

   ```bash
   atlas migrate push <dir name>
   ```
   Be sure to replace `<dir name>` with the name of the directory containing your migrations. (e.g `app`)

4. Atlas will print a link to the overview page for your migration directory, e.g:
   ```
   https://gh.atlasgo.cloud/dirs/4294967296
   ```
5. Click on "Doc" in the top tabs to view the documentation for your schema.

![](https://atlasgo.io/uploads/blog/v0.18/schemadoc.png)

## Drift Detection

Managing database schemas is hard. Since they are the (oftentimes only) stateful component in an application, issues
originating in a faulty database state can have wide impact on your products and services. A relatively simple issue,
that can have a huge impact is when the database schema is not in sync with what downstream consumers expect it to be.
In thi doc, we want to present how Atlas can help detect those schema drifts by monitoring your databases and
comparing their state with what you expect it to be and notifying you, once there is a schema change.

:::info PREMIUM FEATURE
Drift Detection is currently only available in the premium subscription.
:::

Atlas now can periodically check if your deployed databases schemas match their desired state. However, this requires
Atlas to connect to your database and opening up a database to the internet is never a good idea. Therefore, we added
the Atlas Agent as well. It serves as a middleman between Atlas Cloud and your database. All it requires is access to
Atlas and network access to the database.

![image](https://github.com/ariga/atlas/assets/12862103/a48100c1-9f5d-41c9-b184-ffe816f1d623)

## SQLAlchemy Support

#### Goodbye, Alembic. Hello, Atlas.

SQLAlchemy is a popular ORM toolkit widely used in the Python community. SQLAlchemy allows users to
describe their data model using its [declarative-mapping](https://docs.sqlalchemy.org/en/20/orm/declarative_tables.html)
feature. To actually create the underlying tables, users can use the `Base.metadata.create_all` method
which may be sufficient during development where tables can be routinely dropped and re-created.

However, at some point, teams need more control and decide to employ
the [versioned migrations](/concepts/declarative-vs-versioned#versioned-migrations) methodology,
which is a more robust way to manage a database schema.

The native way to manage migrations with SQLAlchemy is to use the [Alembic](https://alembic.sqlalchemy.org/en/latest/) migration tool.
Alembic can [automatically generate](https://alembic.sqlalchemy.org/en/latest/autogenerate.html#auto-generating-migrations)
migration scripts from the difference between the current state of the database and the desired state of the application.

A downside of this approach is that in order for it to work, a pre-existing database with the current version of the schema must be connected to.
In many production environments, databases should generally not be reachable from developer workstations,
which means this comparison is normally done against a local copy of the database which may have
undergone some changes that aren't reflected in the existing migrations.

In addition, Alembic auto-generation is [fails to detect many kinds of changes](https://alembic.sqlalchemy.org/en/latest/autogenerate.html#what-does-autogenerate-detect-and-what-does-it-not-detect)
and cannot be relied upon to generate production-ready migration scripts without routine manual intervention.

Atlas, on the other hand, can automatically plan database schema migrations for SQLAlchemy
without requiring a connection to such a database and can detect almost any kind of schema change.
Atlas plans migrations by calculating the diff between the _current_ state of the database,
and its _desired_ state.

To learn how to use Atlas with SQLAlchemy, check out our [SQLAlchemy Guide](/guides/orms/sqlalchemy).

Special thanks to [No'am (Miko) Tamir](https://github.com/noamtamir) (who also doubles as my young brother)
for his fantastic work building the [prototype](https://github.com/noamtamir/atlas-provider-sqlalchemy) for this
feature and to [Ronen Lubin](https://github.com/ronenlu) for making it production-ready.