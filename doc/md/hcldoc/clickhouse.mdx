---
title: ClickHouse Schema
id: clickhouse
slug: /hcl/clickhouse
---



## `materialized` {#materialized}
The `materialized` block describes a materialized view in a database schema.

~~~hcl
materialized "name" {
  schema = schema.public
  column "total" {
    null = true
    type = numeric
  }
  ...
}
~~~




### Attributes {#materialized-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="materialized.as"><a href="#materialized.as"><code>as</code></a></td>
    <td><code>true</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="materialized.comment"><a href="#materialized.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="materialized.depends_on"><a href="#materialized.depends_on"><code>depends_on</code></a></td>
    <td><code>false</code></td>
  <td class="no-margin-bottom">

List of object references
  </td>

  </tr>
  <tr>
      <td id="materialized.engine"><a href="#materialized.engine"><code>engine</code></a></td>
    <td><code>false</code></td>
<td>

Table engine can be one of:
1. `enum (MergeTree, SharedMergeTree, Memory)`
2. Raw expression defined with `sql("expr")`

</td>
  </tr>
  <tr>
      <td id="materialized.populate"><a href="#materialized.populate"><code>populate</code></a></td>
    <td><code>false</code></td>
  <td><code>bool</code></td>
  </tr>
  <tr>
      <td id="materialized.schema"><a href="#materialized.schema"><code>schema</code></a></td>
    <td><code>true</code></td>
  <td class="no-margin-bottom">

Object reference to [`schema`](#schema)
  </td>

  </tr>
  <tr>
      <td id="materialized.to"><a href="#materialized.to"><code>to</code></a></td>
    <td><code>false</code></td>
<td>

Define structure of view can be one of:
1. Object reference to [`table`](#table)
2. Object reference to [`view`](#view)

</td>
  </tr>
</table>



### Blocks {#materialized-blocks}



    
#### `materialized.column` {#materialized.column}


##### `materialized.column` attributes {#materialized.column-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="materialized.column.comment"><a href="#materialized.column.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="materialized.column.null"><a href="#materialized.column.null"><code>null</code></a></td>
    <td><code>false</code></td>
  <td><code>bool</code></td>
  </tr>
  <tr>
      <td id="materialized.column.type"><a href="#materialized.column.type"><code>type</code></a></td>
    <td><code>true</code></td>
<td>

Column type can be one of:
1. Schema type
2. Raw expression defined with `sql("expr")`

</td>
  </tr>
</table>




##### `materialized.column` constraints {#materialized.column-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `true`
| Repeatable                  |      `false`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`





    
#### `materialized.primary_key` {#materialized.primary_key}


##### `materialized.primary_key` attributes {#materialized.primary_key-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="materialized.primary_key.columns"><a href="#materialized.primary_key.columns"><code>columns</code></a></td>
    <td><code>false</code></td>
<td>

Primary key columns can be one of:
1. List of object reference to [`column`](#materialized.column)
2. List of object reference to [`table.column`](#table.column)

</td>
  </tr>
  <tr>
      <td id="materialized.primary_key.comment"><a href="#materialized.primary_key.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
</table>



##### `materialized.primary_key` blocks {#materialized.primary_key-blocks}



    
#### `materialized.primary_key.on` {#materialized.primary_key.on}


##### `materialized.primary_key.on` attributes {#materialized.primary_key.on-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="materialized.primary_key.on.column"><a href="#materialized.primary_key.on.column"><code>column</code></a></td>
    <td><code>false</code></td>
<td>

Primary key column can be one of:
1. Object reference to [`column`](#materialized.column)
2. Object reference to [`table.column`](#table.column)

</td>
  </tr>
  <tr>
      <td id="materialized.primary_key.on.expr"><a href="#materialized.primary_key.on.expr"><code>expr</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
</table>




##### `materialized.primary_key.on` constraints {#materialized.primary_key.on-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `false`
| Repeatable                  |      `true`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`
| Mutually exclusive sets     | `[column, expr]`
| One of required sets       | `[column, expr]`




##### `materialized.primary_key` constraints {#materialized.primary_key-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `false`
| Repeatable                  |      `false`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`
| Mutually exclusive sets     | `[columns, on]`
| One of required sets       | `[columns, on]`




### Constraints {#materialized-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `true`
| Allow Qualifier             |      `true`
| Repeatable                  |      `false`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`
| Mutually exclusive sets     | `[to, engine]`, `[to, populate]`
| One of required sets       | `[to, engine]`





## `schema` {#schema}
The `schema` block describes a database schema.

~~~hcl
schema "public" {
  ...
}
~~~




### Attributes {#schema-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="schema.comment"><a href="#schema.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="schema.engine"><a href="#schema.engine"><code>engine</code></a></td>
    <td><code>false</code></td>
<td>

Schema engine can be one of:
1. `enum (Atomic, Lazy)`
2. Raw expression defined with `sql("expr")`

</td>
  </tr>
  <tr>
      <td id="schema.name"><a href="#schema.name"><code>name</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
</table>




### Constraints {#schema-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `true`
| Allow Qualifier             |      `false`
| Repeatable                  |      `false`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`





## `table` {#table}
The `table` block describes a table in a database schema.

~~~hcl
table "users" {
  schema = schema.public
  column "id" {
    type = int
  }
  ...
}
~~~




### Attributes {#table-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="table.comment"><a href="#table.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="table.engine"><a href="#table.engine"><code>engine</code></a></td>
    <td><code>true</code></td>
<td>

Table engine can be one of:
1. `enum (MergeTree, SharedMergeTree, Memory)`
2. Raw expression defined with `sql("expr")`

</td>
  </tr>
  <tr>
      <td id="table.schema"><a href="#table.schema"><code>schema</code></a></td>
    <td><code>true</code></td>
  <td class="no-margin-bottom">

Object reference to [`schema`](#schema)
  </td>

  </tr>
  <tr>
      <td id="table.settings"><a href="#table.settings"><code>settings</code></a></td>
    <td><code>false</code></td>
  <td><code>map</code></td>
  </tr>
  <tr>
      <td id="table.ttl"><a href="#table.ttl"><code>ttl</code></a></td>
    <td><code>false</code></td>
<td>

Column ttl can be one of:
1. `string`
2. Raw expression defined with `sql("expr")`

</td>
  </tr>
</table>



### Blocks {#table-blocks}



    
#### `table.check` {#table.check}


##### `table.check` attributes {#table.check-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="table.check.comment"><a href="#table.check.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="table.check.expr"><a href="#table.check.expr"><code>expr</code></a></td>
    <td><code>true</code></td>
  <td><code>string</code></td>
  </tr>
</table>




##### `table.check` constraints {#table.check-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `false`
| Repeatable                  |      `true`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`





    
#### `table.column` {#table.column}


##### `table.column` attributes {#table.column-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="table.column.codec"><a href="#table.column.codec"><code>codec</code></a></td>
    <td><code>false</code></td>
<td>

Column codec can be one of:
1. `string`
2. Raw expression defined with `sql("expr")`
3. `enum (NONE, ZSTD, LZ4, LZ4HC, DoubleDelta, Gorilla, FPC, T64, AES_128_GCM_SIV, AES_256_GCM_SIV)`

</td>
  </tr>
  <tr>
      <td id="table.column.comment"><a href="#table.column.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="table.column.default"><a href="#table.column.default"><code>default</code></a></td>
    <td><code>false</code></td>
<td>

Column default expression can be one of:
1. `bool`
2. `string`
3. `number`
4. Raw expression defined with `sql("expr")`

</td>
  </tr>
  <tr>
      <td id="table.column.default_kind"><a href="#table.column.default_kind"><code>default_kind</code></a></td>
    <td><code>false</code></td>
<td>

Column default kind can be one of:
1. `enum (DEFAULT, MATERIALIZED, EPHEMERAL, ALIAS)`

</td>
  </tr>
  <tr>
      <td id="table.column.null"><a href="#table.column.null"><code>null</code></a></td>
    <td><code>false</code></td>
  <td><code>bool</code></td>
  </tr>
  <tr>
      <td id="table.column.ttl"><a href="#table.column.ttl"><code>ttl</code></a></td>
    <td><code>false</code></td>
<td>

Column ttl can be one of:
1. `string`
2. Raw expression defined with `sql("expr")`

</td>
  </tr>
  <tr>
      <td id="table.column.type"><a href="#table.column.type"><code>type</code></a></td>
    <td><code>true</code></td>
<td>

Column type can be one of:
1. Schema type
2. Raw expression defined with `sql("expr")`

</td>
  </tr>
</table>




##### `table.column` constraints {#table.column-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `true`
| Repeatable                  |      `true`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`





    
#### `table.index` {#table.index}


##### `table.index` attributes {#table.index-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="table.index.comment"><a href="#table.index.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="table.index.granularity"><a href="#table.index.granularity"><code>granularity</code></a></td>
    <td><code>false</code></td>
  <td><code>int</code></td>
  </tr>
  <tr>
      <td id="table.index.type"><a href="#table.index.type"><code>type</code></a></td>
    <td><code>true</code></td>
<td>

Index type can be one of:
1. Raw expression defined with `sql("expr")`
2. `string`
3. `enum (minmax, bloom_filter)`

</td>
  </tr>
</table>



##### `table.index` blocks {#table.index-blocks}



    
#### `table.index.on` {#table.index.on}


##### `table.index.on` attributes {#table.index.on-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="table.index.on.expr"><a href="#table.index.on.expr"><code>expr</code></a></td>
    <td><code>true</code></td>
  <td><code>string</code></td>
  </tr>
</table>




##### `table.index.on` constraints {#table.index.on-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `true`
| Require Name                |      `false`
| Repeatable                  |      `false`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`




##### `table.index` constraints {#table.index-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `true`
| Repeatable                  |      `false`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`





    
#### `table.primary_key` {#table.primary_key}


##### `table.primary_key` attributes {#table.primary_key-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="table.primary_key.columns"><a href="#table.primary_key.columns"><code>columns</code></a></td>
    <td><code>false</code></td>
<td>

Primary key columns can be one of:
1. List of object reference to [`column`](#table.column)
2. List of object reference to [`table.column`](#table.column)

</td>
  </tr>
  <tr>
      <td id="table.primary_key.comment"><a href="#table.primary_key.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
</table>



##### `table.primary_key` blocks {#table.primary_key-blocks}



    
#### `table.primary_key.on` {#table.primary_key.on}


##### `table.primary_key.on` attributes {#table.primary_key.on-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="table.primary_key.on.column"><a href="#table.primary_key.on.column"><code>column</code></a></td>
    <td><code>false</code></td>
<td>

Primary key column can be one of:
1. Object reference to [`column`](#table.column)
2. Object reference to [`table.column`](#table.column)

</td>
  </tr>
  <tr>
      <td id="table.primary_key.on.expr"><a href="#table.primary_key.on.expr"><code>expr</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
</table>




##### `table.primary_key.on` constraints {#table.primary_key.on-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `false`
| Repeatable                  |      `true`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`
| Mutually exclusive sets     | `[column, expr]`
| One of required sets       | `[column, expr]`




##### `table.primary_key` constraints {#table.primary_key-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `false`
| Repeatable                  |      `false`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`
| Mutually exclusive sets     | `[columns, on]`
| One of required sets       | `[columns, on]`




### Constraints {#table-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `true`
| Allow Qualifier             |      `true`
| Repeatable                  |      `false`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`





## `view` {#view}
The `view` block describes a view in a database schema.

~~~hcl
view "clean_users" {
  schema = schema.public
  column "id" {
    type = int
  }
  ...
}
~~~




### Attributes {#view-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="view.as"><a href="#view.as"><code>as</code></a></td>
    <td><code>true</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="view.comment"><a href="#view.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="view.depends_on"><a href="#view.depends_on"><code>depends_on</code></a></td>
    <td><code>false</code></td>
  <td class="no-margin-bottom">

List of object references
  </td>

  </tr>
  <tr>
      <td id="view.schema"><a href="#view.schema"><code>schema</code></a></td>
    <td><code>true</code></td>
  <td class="no-margin-bottom">

Object reference to [`schema`](#schema)
  </td>

  </tr>
</table>



### Blocks {#view-blocks}



    
#### `view.column` {#view.column}


##### `view.column` attributes {#view.column-attributes}



<table class="attributes-table">
  <tr>
    <th>Name</th>
    <th>Required</th>
    <th>Value</th>
  </tr>
  <tr>
      <td id="view.column.comment"><a href="#view.column.comment"><code>comment</code></a></td>
    <td><code>false</code></td>
  <td><code>string</code></td>
  </tr>
  <tr>
      <td id="view.column.null"><a href="#view.column.null"><code>null</code></a></td>
    <td><code>false</code></td>
  <td><code>bool</code></td>
  </tr>
  <tr>
      <td id="view.column.type"><a href="#view.column.type"><code>type</code></a></td>
    <td><code>true</code></td>
<td>

Column type can be one of:
1. Schema type
2. Raw expression defined with `sql("expr")`

</td>
  </tr>
</table>




##### `view.column` constraints {#view.column-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `true`
| Repeatable                  |      `false`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`




### Constraints {#view-constraints}



|    Constraint               |           Value
|-----------------------------|------------------------------------
| Required                    |      `false`
| Require Name                |      `true`
| Allow Qualifier             |      `true`
| Repeatable                  |      `false`
| Allow unknown blocks        |      `false`
| Allow unknown attributes    |      `false`
| Mutually exclusive sets     | `[latest, git]`

